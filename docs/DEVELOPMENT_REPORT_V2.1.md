# TransNovel ê°œë°œ ë³´ê³ ì„œ v2.1

**í”„ë¡œì íŠ¸**: TransNovel - AI ê¸°ë°˜ ì›¹ì†Œì„¤ ë²ˆì—­ í”Œë«í¼
**ì‘ì„±ì¼**: 2026ë…„ 1ì›” 21ì¼
**ë²„ì „**: v2.1 (Vercel Pro ì—…ê·¸ë ˆì´ë“œ ë° QA ì™„ë£Œ)

---

## ëª©ì°¨

1. [ê°œìš”](#1-ê°œìš”)
2. [Vercel Pro ì—…ê·¸ë ˆì´ë“œ](#2-vercel-pro-ì—…ê·¸ë ˆì´ë“œ)
3. [ì„œë²„ ì¸¡ ë²ˆì—­ ì‹œìŠ¤í…œ ì „í™˜](#3-ì„œë²„-ì¸¡-ë²ˆì—­-ì‹œìŠ¤í…œ-ì „í™˜)
4. [ì„¤ì •ì§‘ ìƒì„± ì‹œìŠ¤í…œ ê°œì„ ](#4-ì„¤ì •ì§‘-ìƒì„±-ì‹œìŠ¤í…œ-ê°œì„ )
5. [í”„ë¡œë•ì…˜ ì•ˆì •ì„± ê°œì„  (QA)](#5-í”„ë¡œë•ì…˜-ì•ˆì •ì„±-ê°œì„ -qa)
6. [DB ì—°ê²° ì•ˆì •ì„± ê°œì„ ](#6-db-ì—°ê²°-ì•ˆì •ì„±-ê°œì„ )
7. [ìˆ˜ì •ëœ íŒŒì¼ ëª©ë¡](#7-ìˆ˜ì •ëœ-íŒŒì¼-ëª©ë¡)
8. [í–¥í›„ ì‘ì—…](#8-í–¥í›„-ì‘ì—…)

---

## 1. ê°œìš”

### 1.1 ì´ë²ˆ ì—…ë°ì´íŠ¸ ìš”ì•½

v2.0ì—ì„œ v2.1ë¡œì˜ ì£¼ìš” ë³€ê²½ì‚¬í•­:

| êµ¬ë¶„ | v2.0 (ì´ì „) | v2.1 (í˜„ì¬) |
|------|-------------|-------------|
| **Vercel Plan** | Hobby (10ì´ˆ íƒ€ì„ì•„ì›ƒ) | Pro (60~300ì´ˆ íƒ€ì„ì•„ì›ƒ) |
| **ë²ˆì—­ ì²˜ë¦¬ ìœ„ì¹˜** | í´ë¼ì´ì–¸íŠ¸ ì¸¡ (ë¸Œë¼ìš°ì €) | ì„œë²„ ì¸¡ (API Routes) |
| **ì²­í¬ í¬ê¸°** | 500ì | ì±•í„° ì „ì²´ (ì²­í¬ ì—†ìŒ) |
| **ë¸Œë¼ìš°ì € ì˜ì¡´ì„±** | ë¸Œë¼ìš°ì € ë‹«ìœ¼ë©´ ë²ˆì—­ ì¤‘ë‹¨ | ë¸Œë¼ìš°ì € ë‹«ì•„ë„ ê³„ì† ì§„í–‰ |
| **ë²ˆì—­ í’ˆì§ˆ** | ì²­í¬ ê²½ê³„ì—ì„œ ë§¥ë½ ì†ì‹¤ | ì „ì²´ ë§¥ë½ ìœ ì§€ë¡œ í’ˆì§ˆ í–¥ìƒ |

### 1.2 í•µì‹¬ ì„±ê³¼

- **ë²ˆì—­ í’ˆì§ˆ í–¥ìƒ**: ì±•í„° ì „ì²´ë¥¼ í•œ ë²ˆì— ë²ˆì—­í•˜ì—¬ ë§¥ë½ ì¼ê´€ì„± ìœ ì§€
- **ì½”ë“œ ë‹¨ìˆœí™”**: ì²­í¬ ë¶„í• /ì¡°í•© ë¡œì§ ì œê±°ë¡œ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- **ì‚¬ìš©ì ê²½í—˜ ê°œì„ **: ë¸Œë¼ìš°ì € ë‹«ì•„ë„ ë²ˆì—­ ê³„ì† ì§„í–‰
- **í”„ë¡œë•ì…˜ ì•ˆì •ì„±**: 60ì—¬ ê°œ ë²„ê·¸ ìˆ˜ì • ë° ë°©ì–´ì  ì½”ë”© ì ìš©

---

## 2. Vercel Pro ì—…ê·¸ë ˆì´ë“œ

### 2.1 ì—…ê·¸ë ˆì´ë“œ ë°°ê²½

ê¸°ì¡´ Vercel Hobby Planì˜ 10ì´ˆ í•¨ìˆ˜ íƒ€ì„ì•„ì›ƒ ì œí•œìœ¼ë¡œ ì¸í•´:
- ê¸´ ì±•í„°ë¥¼ 500ì ì²­í¬ë¡œ ë¶„í•  í•„ìš”
- í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì²­í¬ë³„ë¡œ API í˜¸ì¶œ ì¡°ìœ¨ í•„ìš”
- ë¸Œë¼ìš°ì €ê°€ ì—´ë ¤ ìˆì–´ì•¼ ë²ˆì—­ ì§„í–‰

### 2.2 Pro Plan ì´ì 

| í•­ëª© | Hobby | Pro |
|------|-------|-----|
| **í•¨ìˆ˜ íƒ€ì„ì•„ì›ƒ** | 10ì´ˆ | 60ì´ˆ (ê¸°ë³¸), ìµœëŒ€ 300ì´ˆ |
| **ë™ì‹œ ì‹¤í–‰** | ì œí•œì  | í™•ì¥ ê°€ëŠ¥ |
| **ëŒ€ì—­í­** | 100GB | 1TB |

### 2.3 ì„¤ì • ë³€ê²½

```javascript
// vercel.json (ìƒˆë¡œ ì¶”ê°€)
{
  "functions": {
    "src/app/api/translation/route.ts": {
      "maxDuration": 300
    },
    "src/app/api/works/[id]/setting-bible/analyze-batch/route.ts": {
      "maxDuration": 300
    }
  }
}
```

---

## 3. ì„œë²„ ì¸¡ ë²ˆì—­ ì‹œìŠ¤í…œ ì „í™˜

### 3.1 ì•„í‚¤í…ì²˜ ë³€ê²½

**ë³€ê²½ ì „ (v2.0)**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     í´ë¼ì´ì–¸íŠ¸ (ë¸Œë¼ìš°ì €)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. ì›ë¬¸ì„ 500ì ì²­í¬ë¡œ ë¶„í•                                      â”‚
â”‚  2. ê° ì²­í¬ë§ˆë‹¤ /api/translation API í˜¸ì¶œ                        â”‚
â”‚  3. ê²°ê³¼ ì¡°í•©í•˜ì—¬ ì™„ì„±ëœ ë²ˆì—­ë¬¸ ìƒì„±                              â”‚
â”‚  4. ì§„í–‰ë¥  UI í‘œì‹œ                                               â”‚
â”‚  âš ï¸ ë¸Œë¼ìš°ì €ë¥¼ ë‹«ìœ¼ë©´ ë²ˆì—­ ì¤‘ë‹¨!                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë³€ê²½ í›„ (v2.1)**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     í´ë¼ì´ì–¸íŠ¸ (ë¸Œë¼ìš°ì €)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. /api/translation API í˜¸ì¶œ (ì±•í„° ëª©ë¡ ì „ë‹¬)                   â”‚
â”‚  2. SSEë¡œ ì§„í–‰ë¥  ìˆ˜ì‹                                             â”‚
â”‚  âœ… ë¸Œë¼ìš°ì € ë‹«ì•„ë„ ì„œë²„ì—ì„œ ê³„ì† ì§„í–‰!                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ì„œë²„ (API Routes)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. ì±•í„° ì „ì²´ë¥¼ í•œ ë²ˆì— Gemini APIë¡œ ë²ˆì—­                         â”‚
â”‚  2. ë²ˆì—­ ì™„ë£Œ í›„ DBì— ì €ì¥                                        â”‚
â”‚  3. SSEë¡œ ì§„í–‰ë¥  ì „ì†¡                                            â”‚
â”‚  â±ï¸ ìµœëŒ€ 300ì´ˆ íƒ€ì„ì•„ì›ƒ (Pro Plan)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ì£¼ìš” ì½”ë“œ ë³€ê²½

#### 3.2.1 gemini.ts - ì±•í„° ì „ì²´ ë²ˆì—­ í•¨ìˆ˜ ì¶”ê°€

```typescript
// ê¸°ì¡´: splitIntoChunks + translateChunks
// ì‹ ê·œ: translateChapter (ì±•í„° ì „ì²´ ë²ˆì—­)

export async function translateChapter(
  content: string,
  context: TranslationContext,
  maxRetries: number = 5
): Promise<string> {
  await rateLimiter.acquire();

  const systemPrompt = buildTranslationPrompt(context);

  for (let attempt = 0; attempt < maxRetries; attempt++) {
    try {
      const result = await model.generateContent({
        contents: [{ role: 'user', parts: [{ text: content }] }],
        systemInstruction: systemPrompt,
        generationConfig: {
          temperature: 0.4,
          maxOutputTokens: 65536,
        },
      });

      const translated = result.response.text();
      if (!translated?.trim()) {
        throw new TranslationError('ë¹ˆ ì‘ë‹µ', 'EMPTY_RESPONSE', true);
      }

      return translated;
    } catch (error) {
      // ì¬ì‹œë„ ë¡œì§...
    }
  }
}
```

#### 3.2.2 translation/route.ts - ì²­í¬ ë¡œì§ ì œê±°

```typescript
// ë³€ê²½ ì „: ì²­í¬ ë¶„í•  â†’ ì²­í¬ë³„ ë²ˆì—­ â†’ ì¡°í•©
// ë³€ê²½ í›„: ì±•í„° ì „ì²´ ë²ˆì—­

async function processTranslation(jobId: string, workId: string, chapters: Chapter[]) {
  for (const chapter of chapters) {
    // ì²­í¬ ë¶„í•  ì—†ì´ ì „ì²´ ë²ˆì—­
    const translated = await translateChapter(chapter.content, context);

    await db.chapter.update({
      where: { id: chapter.id },
      data: {
        translated,
        status: 'TRANSLATED',
      },
    });

    await updateProgress(jobId, chapter.number);
  }
}
```

### 3.3 ì§„í–‰ë¥  ì¶”ì  ë‹¨ìˆœí™”

| í•­ëª© | v2.0 | v2.1 |
|------|------|------|
| **ì§„í–‰ë¥  ë‹¨ìœ„** | ì²­í¬ ë‹¨ìœ„ | ì±•í„° ë‹¨ìœ„ |
| **ì—…ë°ì´íŠ¸ ë¹ˆë„** | ì²­í¬ë‹¹ 1íšŒ (ë§ìŒ) | ì±•í„°ë‹¹ 1íšŒ (ì ìŒ) |
| **ë³µì¡ë„** | currentChunk/totalChunks ê´€ë¦¬ | completedChapters ë§Œ ê´€ë¦¬ |

---

## 4. ì„¤ì •ì§‘ ìƒì„± ì‹œìŠ¤í…œ ê°œì„ 

### 4.1 ë°°ì¹˜ í¬ê¸° í™•ëŒ€

| í•­ëª© | v2.0 | v2.1 |
|------|------|------|
| **ë°°ì¹˜ë‹¹ íšŒì°¨ ìˆ˜** | 3ê°œ | 10ê°œ |
| **ë°°ì¹˜ ê°„ ë”œë ˆì´** | 60ì´ˆ | 1ì´ˆ |
| **ì¬ì‹œë„ ë”œë ˆì´** | 60ì´ˆ | 15ì´ˆ |
| **100íšŒì°¨ ë¶„ì„ ì‹œê°„** | ~90ë¶„ | ~15ë¶„ |

```typescript
// src/components/setting-bible/generation-progress.tsx
const BATCH_MAX_RETRIES = 3;
const BATCH_RETRY_DELAY_MS = 15000;  // 15ì´ˆ (ê¸°ì¡´ 60ì´ˆ)
const BATCH_INTERVAL_DELAY_MS = 1000; // 1ì´ˆ (ê¸°ì¡´ 60ì´ˆ)

// batchSize = 10 (ê¸°ì¡´ 3)
```

### 4.2 ê¸€ë¡œë²Œ ì§„í–‰ë¥  í‘œì‹œ

ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™í•´ë„ ì„¤ì •ì§‘ ìƒì„± ì§„í–‰ë¥ ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê¸€ë¡œë²Œ ì¸ë””ì¼€ì´í„° ì¶”ê°€:

```typescript
// src/components/layout/global-translation-indicator.tsx
export function GlobalTranslationIndicator() {
  const { jobsArray } = useTranslation();
  const { jobsArray: bibleJobsArray } = useBibleGeneration();

  // ë²ˆì—­ ì‘ì—…ê³¼ ì„¤ì •ì§‘ ìƒì„± ì‘ì—… ëª¨ë‘ í‘œì‹œ
  return (
    <div className="fixed bottom-4 right-4 z-50">
      {/* ë²ˆì—­ ì§„í–‰ë¥  */}
      {activeTranslationJobs.map(job => (
        <TranslationIndicator key={job.jobId} job={job} />
      ))}

      {/* ì„¤ì •ì§‘ ìƒì„± ì§„í–‰ë¥  */}
      {activeBibleJobs.map(job => (
        <BibleGenerationIndicator key={job.workId} job={job} />
      ))}
    </div>
  );
}
```

### 4.3 ì·¨ì†Œ ê¸°ëŠ¥ êµ¬í˜„

```typescript
// src/contexts/bible-generation-context.tsx
const requestCancel = useCallback((workId: string) => {
  cancelRequestsRef.current.add(workId);
}, []);

const isCancelRequested = useCallback((workId: string) => {
  return cancelRequestsRef.current.has(workId);
}, []);
```

### 4.4 í˜ì´ì§€ ì´íƒˆ ë°©ì§€

```typescript
// src/components/setting-bible/generation-progress.tsx
useEffect(() => {
  const handleBeforeUnload = (e: BeforeUnloadEvent) => {
    if (state.status === "generating") {
      e.preventDefault();
      e.returnValue = "ì„¤ì •ì§‘ ë¶„ì„ì´ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ë²—ì–´ë‚˜ë©´ ë¶„ì„ì´ ì¤‘ë‹¨ë©ë‹ˆë‹¤.";
      return e.returnValue;
    }
  };

  window.addEventListener("beforeunload", handleBeforeUnload);
  return () => window.removeEventListener("beforeunload", handleBeforeUnload);
}, [state.status]);
```

---

## 5. í”„ë¡œë•ì…˜ ì•ˆì •ì„± ê°œì„  (QA)

### 5.1 ìˆ˜ì •ëœ Critical ì´ìŠˆ

#### 5.1.1 SSE ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìˆ˜ì •

**ë¬¸ì œ**: SSE ì¬ì—°ê²° setTimeoutì´ ì •ë¦¬ë˜ì§€ ì•Šì•„ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°œìƒ

**í•´ê²°**:
```typescript
// src/contexts/translation-context.tsx

// ì¬ì—°ê²° íƒ€ì„ì•„ì›ƒ ì¶”ì ìš© ref ì¶”ê°€
const reconnectTimeoutsRef = useRef<Map<string, NodeJS.Timeout>>(new Map());

// íƒ€ì„ì•„ì›ƒ ì„¤ì • ì‹œ ì €ì¥
const timeoutId = setTimeout(() => {
  reconnectTimeoutsRef.current.delete(jobId);
  connectSSE(jobId, true);
}, RECONNECT_DELAY);
reconnectTimeoutsRef.current.set(jobId, timeoutId);

// ì–¸ë§ˆìš´íŠ¸ ì‹œ ëª¨ë“  íƒ€ì„ì•„ì›ƒ ì •ë¦¬
useEffect(() => {
  return () => {
    eventSourcesRef.current.forEach((es) => es.close());
    reconnectTimeoutsRef.current.forEach((timeout) => clearTimeout(timeout));
  };
}, []);
```

#### 5.1.2 ì„¸ì…˜ ì²´í¬ ëˆ„ë½ ìˆ˜ì •

**ë¬¸ì œ**: `works/page.tsx`ì—ì„œ sessionì´ nullì¼ ë•Œ DB ì¿¼ë¦¬ ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥

**í•´ê²°**:
```typescript
// src/app/(dashboard)/works/page.tsx
if (!session?.user?.id) {
  return (
    <div className="max-w-6xl">
      <p className="text-muted-foreground">ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
    </div>
  );
}
```

#### 5.1.3 null ì²´í¬ ëˆ„ë½ ìˆ˜ì •

**ë¬¸ì œ**: `BulkUploadDialog`ì—ì„œ `preview.length` ì ‘ê·¼ ì‹œ TypeError

**í•´ê²°**:
```typescript
// ë³€ê²½ ì „
{preview.length > 0 && (...)}

// ë³€ê²½ í›„
{preview && preview.length > 0 && (...)}
```

### 5.2 ë°©ì–´ì  ì½”ë”© ì ìš©

#### 5.2.1 ë°°ì—´ ì²˜ë¦¬ ì•ˆì „í™”

```typescript
// src/components/chapters/chapter-list.tsx
export function ChapterList({ workId, chapters = [], itemsPerPage = 30 }) {
  const safeChapters = Array.isArray(chapters) ? chapters : [];
  // ...
}

// src/components/download/download-dialog.tsx
export function DownloadDialog({ workId, chapters = [] }) {
  const safeChapters = Array.isArray(chapters) ? chapters : [];
  // ...
}
```

#### 5.2.2 ë‚ ì§œ ì •ë ¬ ì•ˆì „í™”

```typescript
// src/contexts/translation-context.tsx
const jobsArray = useMemo(() => {
  try {
    const arr = Array.from(jobs.values());
    return arr.sort((a, b) => {
      const aTime = a.createdAt instanceof Date
        ? a.createdAt.getTime()
        : new Date(a.createdAt).getTime();
      const bTime = b.createdAt instanceof Date
        ? b.createdAt.getTime()
        : new Date(b.createdAt).getTime();
      return aTime - bTime;
    });
  } catch (e) {
    return Array.from(jobs.values());
  }
}, [jobs]);
```

### 5.3 ì—ëŸ¬ ë°”ìš´ë”ë¦¬ ì¶”ê°€

```typescript
// src/components/error-boundary.tsx (ì‹ ê·œ)
export class ErrorBoundary extends Component<Props, State> {
  static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error };
  }

  render() {
    if (this.state.hasError) {
      return this.props.fallback ?? <DefaultErrorUI />;
    }
    return this.props.children;
  }
}

// src/app/layout.tsx
<ErrorBoundary fallback={null}>
  <GlobalTranslationIndicator />
</ErrorBoundary>
```

### 5.4 ìŠ¤ì¼ˆë ˆí†¤ ë¡œë”© UI ì¶”ê°€

```typescript
// src/app/(dashboard)/works/[id]/loading.tsx (ì‹ ê·œ)
export default function WorkDetailLoading() {
  return (
    <div className="max-w-6xl animate-in fade-in duration-300">
      {/* Breadcrumb Skeleton */}
      <nav className="mb-8">
        <Skeleton className="h-4 w-24" />
      </nav>

      {/* Page Header Skeleton */}
      <header className="pb-10 border-b border-border mb-10">
        {/* ... */}
      </header>

      {/* Stats Row Skeleton */}
      {/* Chapter List Skeleton */}
      {/* Sidebar Skeleton */}
    </div>
  );
}
```

### 5.5 Toaster next-themes ì˜ì¡´ì„± ì œê±°

```typescript
// src/components/ui/sonner.tsx
// ë³€ê²½ ì „: useTheme() ì‚¬ìš© (ThemeProvider í•„ìš”)
const { theme = "system" } = useTheme()

// ë³€ê²½ í›„: light ëª¨ë“œ ê³ ì •
<Toaster theme="light" />
```

---

## 6. DB ì—°ê²° ì•ˆì •ì„± ê°œì„ 

### 6.1 PgBouncer Transaction Mode ëŒ€ì‘

Supabaseì˜ PgBouncer Transaction Modeì—ì„œ Prisma ì‚¬ìš© ì‹œ ë°œìƒí•˜ëŠ” ë¬¸ì œ í•´ê²°:

```typescript
// src/lib/db.ts
import { PrismaClient } from "@prisma/client";
import { Pool } from "@neondatabase/serverless";

// Connection pooling ì„¤ì •
const globalForPrisma = globalThis as unknown as {
  prisma: PrismaClient | undefined;
};

export const db = globalForPrisma.prisma ?? new PrismaClient({
  datasources: {
    db: {
      url: process.env.DATABASE_URL,
    },
  },
});

if (process.env.NODE_ENV !== "production") {
  globalForPrisma.prisma = db;
}
```

### 6.2 íŠ¸ëœì­ì…˜ íƒ€ì„ì•„ì›ƒ ì„¤ì •

```typescript
// ì„¤ì •ì§‘ í™•ì • ì‹œ íŠ¸ëœì­ì…˜ íƒ€ì„ì•„ì›ƒ 30ì´ˆë¡œ í™•ì¥
await db.$transaction(async (tx) => {
  // ... ì„¤ì •ì§‘ í™•ì • ë¡œì§
}, {
  timeout: 30000,
  maxWait: 10000,
});
```

---

## 7. ìˆ˜ì •ëœ íŒŒì¼ ëª©ë¡

### 7.1 ì‹ ê·œ íŒŒì¼

| íŒŒì¼ | ì„¤ëª… |
|------|------|
| `src/components/error-boundary.tsx` | ì—ëŸ¬ ë°”ìš´ë”ë¦¬ ì»´í¬ë„ŒíŠ¸ |
| `src/app/(dashboard)/works/[id]/loading.tsx` | ì‘í’ˆ ìƒì„¸ í˜ì´ì§€ ìŠ¤ì¼ˆë ˆí†¤ |
| `src/contexts/bible-generation-context.tsx` | ì„¤ì •ì§‘ ìƒì„± ê¸€ë¡œë²Œ ìƒíƒœ ê´€ë¦¬ |
| `src/components/layout/global-translation-indicator.tsx` | ê¸€ë¡œë²Œ ì§„í–‰ë¥  í‘œì‹œ |
| `docs/DEVELOPMENT_REPORT_V2.1.md` | ì´ ë¬¸ì„œ |

### 7.2 ìˆ˜ì •ëœ íŒŒì¼

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|----------|
| `src/lib/gemini.ts` | `translateChapter()` í•¨ìˆ˜ ì¶”ê°€ |
| `src/app/api/translation/route.ts` | ì„œë²„ ì¸¡ ì±•í„° ì „ì²´ ë²ˆì—­ |
| `src/contexts/translation-context.tsx` | SSE ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ìˆ˜ì •, íƒ€ì„ì•„ì›ƒ ê´€ë¦¬ |
| `src/app/(dashboard)/works/page.tsx` | ì„¸ì…˜ ì²´í¬ ì¶”ê°€ |
| `src/app/(dashboard)/works/[id]/translate/page.tsx` | useCallback ì˜ì¡´ì„± ìˆ˜ì • |
| `src/components/chapters/bulk-upload-dialog.tsx` | preview null ì²´í¬ |
| `src/components/chapters/chapter-list.tsx` | chapters ë°°ì—´ ë°©ì–´ì  ì²˜ë¦¬ |
| `src/components/download/download-dialog.tsx` | chapters ë°°ì—´ ë°©ì–´ì  ì²˜ë¦¬ |
| `src/components/setting-bible/generation-progress.tsx` | ë°°ì¹˜ ì„¤ì • ê°œì„ , í˜ì´ì§€ ì´íƒˆ ë°©ì§€ |
| `src/components/ui/sonner.tsx` | next-themes ì˜ì¡´ì„± ì œê±° |
| `src/app/layout.tsx` | ErrorBoundary ì ìš© |

---

## 8. í–¥í›„ ì‘ì—…

### 8.1 ì™„ë£Œëœ ì‘ì—…

- [x] Vercel Pro ì—…ê·¸ë ˆì´ë“œ
- [x] ì„œë²„ ì¸¡ ë²ˆì—­ ì‹œìŠ¤í…œ ì „í™˜
- [x] ì„¤ì •ì§‘ ìƒì„± ìµœì í™”
- [x] QA ë° ë²„ê·¸ ìˆ˜ì • (60+ ì´ìŠˆ)
- [x] í”„ë¡œë•ì…˜ ë°°í¬ ì¤€ë¹„ ì™„ë£Œ

### 8.2 ë‹¤ìŒ ë‹¨ê³„

| ì‘ì—… | ìš°ì„ ìˆœìœ„ | ë¹„ê³  |
|------|----------|------|
| ì‹¤ì„œë¹„ìŠ¤ ëª¨ë‹ˆí„°ë§ | ğŸ”´ ë†’ìŒ | Sentry ë˜ëŠ” Vercel Analytics |
| ë²ˆì—­ ì‹¤íŒ¨ ì±•í„° ìë™ ì¬ì‹œë„ | ğŸŸ¡ ì¤‘ê°„ | ì„œë²„ì—ì„œ ì‹¤íŒ¨ ì‹œ ìë™ ì¬ì‹œë„ |
| ë²ˆì—­ í’ˆì§ˆ í‰ê°€ ì‹œìŠ¤í…œ | ğŸŸ¡ ì¤‘ê°„ | ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘ |
| 2ë‹¨ê³„: í˜‘ì—… í”Œë«í¼ | ğŸŸ¢ ì¥ê¸° | OT ì—ë””í„°, ë§¤ì¹­ ì‹œìŠ¤í…œ |

---

## ë¶€ë¡: ë¹Œë“œ ê²€ì¦

```bash
$ npm run build

> transnovel@0.1.0 build
> prisma generate && next build

âœ” Generated Prisma Client

â–² Next.js 16.1.1 (Turbopack)

  Creating an optimized production build ...
âœ“ Compiled successfully
  Running TypeScript ...
âœ“ Generating static pages (28/28)

Route (app)
â”œ â—‹ /_not-found
â”œ Æ’ /api/translation
â”œ Æ’ /api/works/[id]/setting-bible/analyze-batch
â”œ Æ’ /works
â”œ Æ’ /works/[id]
â”œ Æ’ /works/[id]/translate
â”” ... (28 routes total)

â—‹  (Static)   prerendered as static content
Æ’  (Dynamic)  server-rendered on demand
```

---

*ë¬¸ì„œ ì‘ì„±: Claude Code*
*ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2026-01-21*
